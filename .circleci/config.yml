version: 2
jobs:
    build_py3:
        working_directory: ~/bulstem-py
        docker:
            - image: circleci/python:3.6
        steps:
            - checkout
            - run: pip install -e ".[testing]" --user
            - run: pip install -r requirements-test.txt --user
            - run:
                name: Run Tests
                command: |
                  $HOME/.local/bin/coverage run --source=./ -m pytest
                  $HOME/.local/bin/coverage report
                  $HOME/.local/bin/coverage html  # open htmlcov/index.html in a browser
            - store_artifacts:
                path: htmlcov
workflows:
  version: 2
  build_and_test:
    jobs:
      - build_py3
